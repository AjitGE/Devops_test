Feature: Promo_PST_TA Search

  @TestId_APS_01 @UserStory_US859342
  Scenario: Verify search label name is Promo_PST_TA Code                                             # UserStory_US859342.feature:4
    Given user loads the data from "excel" located at "src\test\resources\Fixture\Promo_DB_Data.xlsx" # Browser_Excel_StepDef.user_loads_the_data_from_located_at(String,String)
    Then user launches browser with url "#TestUrl"                                                    # Browser_Excel_StepDef.user_launches_browser_with_url(String)
    And user validates searchbox named " Promo / PST / TA Code " is present on the page               # UserStory_US859342.user_validates_searchbox_named_is_present_on_the_page(String)
    And user validates searchbox named " Promo / PST / TA Code " is "enabled"                         # UserStory_US859342.user_validates_searchbox_named_is(String,String)

  @TestId_APS_02 @UserStory_US859342
  Scenario: Verify the Search Box have Magnifier glass icon next to it.                               # UserStory_US859342.feature:11
    Given user loads the data from "excel" located at "src\test\resources\Fixture\Promo_DB_Data.xlsx" # Browser_Excel_StepDef.user_loads_the_data_from_located_at(String,String)
    Then user launches browser with url "#TestUrl"                                                    # Browser_Excel_StepDef.user_launches_browser_with_url(String)
    And user can see the "Magnifier glass" icon.                                                      # UserStory_US859342.user_can_see_the_icon(String)
    And user validates Button named "" is "enabled"                                                   # UserStory_US859342.user_validates_Button_named_is(String,String)

  @TestId_APS_03 @UserStory_US859342
  Scenario: Verify Current Promos only checkbox is present & is clickable                             # UserStory_US859342.feature:18
    Given user loads the data from "excel" located at "src\test\resources\Fixture\Promo_DB_Data.xlsx" # Browser_Excel_StepDef.user_loads_the_data_from_located_at(String,String)
    Then user launches browser with url "#TestUrl"                                                    # Browser_Excel_StepDef.user_launches_browser_with_url(String)
    And user validates checkbox named " Current Promos only " is present on the page                  # UserStory_US859342.user_validates_checkbox_named_is_present_on_the_page(String)
    And user validates Checkbox named " Current Promos only " is "enabled"                            # UserStory_US859342.user_validates_Checkbox_named_is(String,String)

  @TestId_APS_04 @UserStory_US859342
  Scenario: Verify the Error message Required                                                         # UserStory_US859342.feature:25
    Given user loads the data from "excel" located at "src\test\resources\Fixture\Promo_DB_Data.xlsx" # Browser_Excel_StepDef.user_loads_the_data_from_located_at(String,String)
    Then user launches browser with url "#TestUrl"                                                    # Browser_Excel_StepDef.user_launches_browser_with_url(String)
    And user enters the Promo code "" in Search box named " Promo / PST / TA Code "                   # UserStory_US859342.user_enters_the_Promo_code_in_Search_box_named(String,String)
    And user clicks on the search button                                                              # UserStory_US859342.user_clicks_on_the_search_button()
    And user validates the error message "Required" on the page                                       # UserStory_US859342.user_validates_the_error_message_on_the_page(String)

  @TestId_APS_05 @UserStory_US859342
  Scenario: Verify the Error message Enter at least 2 characters                                      # UserStory_US859342.feature:33
    Given user loads the data from "excel" located at "src\test\resources\Fixture\Promo_DB_Data.xlsx" # Browser_Excel_StepDef.user_loads_the_data_from_located_at(String,String)
    Then user launches browser with url "#TestUrl"                                                    # Browser_Excel_StepDef.user_launches_browser_with_url(String)
    And user enters the Promo code "#Promo Code" in Search box named " Promo / PST / TA Code "        # UserStory_US859342.user_enters_the_Promo_code_in_Search_box_named(String,String)
    And user clicks on the search button                                                              # UserStory_US859342.user_clicks_on_the_search_button()
    And user validates the error message "Enter at least 2 characters" on the page                    # UserStory_US859342.user_validates_the_error_message_on_the_page(String)

  @TestId_APS_06 @UserStory_US859342
  Scenario: Verify the Error message Special characters not allowed                                   # UserStory_US859342.feature:41
    Given user loads the data from "excel" located at "src\test\resources\Fixture\Promo_DB_Data.xlsx" # Browser_Excel_StepDef.user_loads_the_data_from_located_at(String,String)
    Then user launches browser with url "#TestUrl"                                                    # Browser_Excel_StepDef.user_launches_browser_with_url(String)
    And user enters the Promo code "#Promo Code" in Search box named " Promo / PST / TA Code "        # UserStory_US859342.user_enters_the_Promo_code_in_Search_box_named(String,String)
    And user clicks on the search button                                                              # UserStory_US859342.user_clicks_on_the_search_button()
    And user validates the error message "Special characters not allowed" on the page                 # UserStory_US859342.user_validates_the_error_message_on_the_page(String)

  @TestId_APS_07 @UserStory_US859342
  Scenario: Verify the maximum character limit of error message A max of 5 characters can be entered  # UserStory_US859342.feature:49
    Given user loads the data from "excel" located at "src\test\resources\Fixture\Promo_DB_Data.xlsx" # Browser_Excel_StepDef.user_loads_the_data_from_located_at(String,String)
    Then user launches browser with url "#TestUrl"                                                    # Browser_Excel_StepDef.user_launches_browser_with_url(String)
    And user enters the Promo code "#Promo Code" in Search box named " Promo / PST / TA Code "        # UserStory_US859342.user_enters_the_Promo_code_in_Search_box_named(String,String)
    And user clicks on the search button                                                              # UserStory_US859342.user_clicks_on_the_search_button()
    And user validates the error message "A max of 5 characters can be entered" on the page           # UserStory_US859342.user_validates_the_error_message_on_the_page(String)

  @TestId_APS_08 @UserStory_US859342
  Scenario: Verify search button will work only when the user clicks on the magnifying glass or  Enter key is pressed. # UserStory_US859342.feature:57
    Given user loads the data from "excel" located at "src\test\resources\Fixture\Promo_DB_Data.xlsx"                  # Browser_Excel_StepDef.user_loads_the_data_from_located_at(String,String)
    Then user launches browser with url "#TestUrl"                                                                     # Browser_Excel_StepDef.user_launches_browser_with_url(String)
    And user validates Button named "" is "enabled"                                                                    # UserStory_US859342.user_validates_Button_named_is(String,String)
    And user enters the Promo code "#Promo Code" in Search box named " Promo / PST / TA Code "                         # UserStory_US859342.user_enters_the_Promo_code_in_Search_box_named(String,String)
    And user clicks on the search button                                                                               # UserStory_US859342.user_clicks_on_the_search_button()

  @TestId_APS_09 @UserStory_US859342
  Scenario: Verify search button will work only when the user clicks on the magnifying glass or  Enter key is pressed. # UserStory_US859342.feature:65
    Given user loads the data from "excel" located at "src\test\resources\Fixture\Promo_DB_Data.xlsx"                  # Browser_Excel_StepDef.user_loads_the_data_from_located_at(String,String)
    Then user launches browser with url "#TestUrl"                                                                     # Browser_Excel_StepDef.user_launches_browser_with_url(String)
    And user validates Button named "" is "enabled"                                                                    # UserStory_US859342.user_validates_Button_named_is(String,String)
    And user enters the Promo code "#Promo Code" in Search box named " Promo / PST / TA Code "                         # UserStory_US859342.user_enters_the_Promo_code_in_Search_box_named(String,String)
    And user use Enter keys to click on the search button                                                              # UserStory_US859342.user_use_Enter_keys_to_click_on_the_search_button()

  @TestId_APS_10 @UserStory_US859342
  Scenario: Verify error message when APT cannot connect to any system.                               # UserStory_US859342.feature:73
    Given user loads the data from "excel" located at "src\test\resources\Fixture\Promo_DB_Data.xlsx" # Browser_Excel_StepDef.user_loads_the_data_from_located_at(String,String)
    Then user launches browser with url "#TestUrl"                                                    # Browser_Excel_StepDef.user_launches_browser_with_url(String)
    And user enters the Promo code "#Promo Code" in Search box named " Promo / PST / TA Code "        # UserStory_US859342.user_enters_the_Promo_code_in_Search_box_named(String,String)
    And user clicks on the search button                                                              # UserStory_US859342.user_clicks_on_the_search_button()
    And user validates error message on Search Result Tab "No Response from Ventana/LSCS" on the page # UserStory_US859342.user_validates_error_message_on_Search_Result_Tab_on_the_page(String)
      org.openqa.selenium.NoSuchElementException: no such element: Unable to locate element: {"method":"tag name","selector":"h5"}
        (Session info: chrome=67.0.3396.79)
        (Driver info: chromedriver=2.41.578737 (49da6702b16031c40d63e5618de03a32ff6c197e),platform=Windows NT 10.0.15063 x86_64) (WARNING: The server did not provide any stacktrace information)
      Command duration or timeout: 0 milliseconds
      For documentation on this error, please visit: http://seleniumhq.org/exceptions/no_such_element.html
      Build info: version: '3.7.1', revision: '8a0099a', time: '2017-11-06T21:01:39.354Z'
      System info: host: 'PC391477', ip: '10.79.100.16', os.name: 'Windows 10', os.arch: 'amd64', os.version: '10.0', java.version: '1.8.0_141'
      Driver info: org.openqa.selenium.chrome.ChromeDriver
      Capabilities {acceptInsecureCerts: false, acceptSslCerts: false, applicationCacheEnabled: false, browserConnectionEnabled: false, browserName: chrome, chrome: {chromedriverVersion: 2.41.578737 (49da6702b16031..., userDataDir: C:\Users\716676\AppData\Loc...}, cssSelectorsEnabled: true, databaseEnabled: false, goog:chromeOptions: {debuggerAddress: localhost:55058}, handlesAlerts: true, hasTouchScreen: false, javascriptEnabled: true, locationContextEnabled: true, mobileEmulationEnabled: false, nativeEvents: true, networkConnectionEnabled: false, pageLoadStrategy: normal, platform: XP, platformName: XP, rotatable: false, setWindowRect: true, takesHeapSnapshot: true, takesScreenshot: true, unexpectedAlertBehaviour: , unhandledPromptBehavior: , version: 67.0.3396.79, webStorageEnabled: true}
      Session ID: e1ab0f2ca35b284b78922528507b8d29
      *** Element info: {Using=tag name, value=h5}
      	at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
      	at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)
      	at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
      	at java.lang.reflect.Constructor.newInstance(Constructor.java:423)
      	at org.openqa.selenium.remote.ErrorHandler.createThrowable(ErrorHandler.java:214)
      	at org.openqa.selenium.remote.ErrorHandler.throwIfResponseFailed(ErrorHandler.java:166)
      	at org.openqa.selenium.remote.http.JsonHttpResponseCodec.reconstructValue(JsonHttpResponseCodec.java:40)
      	at org.openqa.selenium.remote.http.AbstractHttpResponseCodec.decode(AbstractHttpResponseCodec.java:80)
      	at org.openqa.selenium.remote.http.AbstractHttpResponseCodec.decode(AbstractHttpResponseCodec.java:44)
      	at org.openqa.selenium.remote.HttpCommandExecutor.execute(HttpCommandExecutor.java:164)
      	at org.openqa.selenium.remote.service.DriverCommandExecutor.execute(DriverCommandExecutor.java:83)
      	at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:600)
      	at org.openqa.selenium.remote.RemoteWebDriver.findElement(RemoteWebDriver.java:370)
      	at org.openqa.selenium.remote.RemoteWebDriver.findElementByTagName(RemoteWebDriver.java:440)
      	at org.openqa.selenium.By$ByTagName.findElement(By.java:334)
      	at org.openqa.selenium.remote.RemoteWebDriver.findElement(RemoteWebDriver.java:362)
      	at sun.reflect.GeneratedMethodAccessor13.invoke(Unknown Source)
      	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
      	at java.lang.reflect.Method.invoke(Method.java:498)
      	at org.openqa.selenium.support.events.EventFiringWebDriver$2.invoke(EventFiringWebDriver.java:109)
      	at com.sun.proxy.$Proxy21.findElement(Unknown Source)
      	at org.openqa.selenium.support.events.EventFiringWebDriver.findElement(EventFiringWebDriver.java:193)
      	at com.CucumberCraft.stepDefinitions.UserStory_US859342.user_validates_error_message_on_Search_Result_Tab_on_the_page(UserStory_US859342.java:137)
      	at ✽.And user validates error message on Search Result Tab "No Response from Ventana/LSCS" on the page(UserStory_US859342.feature:78)


  @TestId_APS_11 @UserStory_US859342
  Scenario: Verify  the field should be un-editable when the search is in progress.                   # UserStory_US859342.feature:81
    Given user loads the data from "excel" located at "src\test\resources\Fixture\Promo_DB_Data.xlsx" # Browser_Excel_StepDef.user_loads_the_data_from_located_at(String,String)
    Then user launches browser with url "#TestUrl"                                                    # Browser_Excel_StepDef.user_launches_browser_with_url(String)
    And user enters the Promo code "#Promo Code" in Search box named " Promo / PST / TA Code "        # UserStory_US859342.user_enters_the_Promo_code_in_Search_box_named(String,String)
    And user validates Button named "" is "enabled"                                                   # UserStory_US859342.user_validates_Button_named_is(String,String)

  @TestId_APS_12 @UserStory_US859342
  Scenario: Enter  a valid Promo code.                                                                # UserStory_US859342.feature:88
    Given user loads the data from "excel" located at "src\test\resources\Fixture\Promo_DB_Data.xlsx" # Browser_Excel_StepDef.user_loads_the_data_from_located_at(String,String)
    Then user launches browser with url "#TestUrl"                                                    # Browser_Excel_StepDef.user_launches_browser_with_url(String)
    And user enters the Promo code "#Promo Code" in Search box named " Promo / PST / TA Code "        # UserStory_US859342.user_enters_the_Promo_code_in_Search_box_named(String,String)
    And user clicks on the search button                                                              # UserStory_US859342.user_clicks_on_the_search_button()

  @TestId_APS_13 @UserStory_US859342
  Scenario: Enter  a valid PST code.                                                                  # UserStory_US859342.feature:95
    Given user loads the data from "excel" located at "src\test\resources\Fixture\Promo_DB_Data.xlsx" # Browser_Excel_StepDef.user_loads_the_data_from_located_at(String,String)
    Then user launches browser with url "#TestUrl"                                                    # Browser_Excel_StepDef.user_launches_browser_with_url(String)
    And user enters the Promo code "#Promo Code" in Search box named " Promo / PST / TA Code "        # UserStory_US859342.user_enters_the_Promo_code_in_Search_box_named(String,String)
    And user clicks on the search button                                                              # UserStory_US859342.user_clicks_on_the_search_button()

  @TestId_APS_14 @UserStory_US859342
  Scenario: Enter  a valid TA code.                                                                   # UserStory_US859342.feature:102
    Given user loads the data from "excel" located at "src\test\resources\Fixture\Promo_DB_Data.xlsx" # Browser_Excel_StepDef.user_loads_the_data_from_located_at(String,String)
    Then user launches browser with url "#TestUrl"                                                    # Browser_Excel_StepDef.user_launches_browser_with_url(String)
    And user enters the Promo code "#Promo Code" in Search box named " Promo / PST / TA Code "        # UserStory_US859342.user_enters_the_Promo_code_in_Search_box_named(String,String)
    And user clicks on the search button                                                              # UserStory_US859342.user_clicks_on_the_search_button()

  @TestId_APS_15 @UserStory_US859342
  Scenario: Enter  a invalid Promo code.                                                              # UserStory_US859342.feature:109
    Given user loads the data from "excel" located at "src\test\resources\Fixture\Promo_DB_Data.xlsx" # Browser_Excel_StepDef.user_loads_the_data_from_located_at(String,String)
    Then user launches browser with url "#TestUrl"                                                    # Browser_Excel_StepDef.user_launches_browser_with_url(String)
    And user enters the Promo code "#Promo Code" in Search box named " Promo / PST / TA Code "        # UserStory_US859342.user_enters_the_Promo_code_in_Search_box_named(String,String)
    And user clicks on the search button                                                              # UserStory_US859342.user_clicks_on_the_search_button()

  @TestId_APS_16 @UserStory_US859342
  Scenario: Enter  a invalid PST code.                                                                # UserStory_US859342.feature:116
    Given user loads the data from "excel" located at "src\test\resources\Fixture\Promo_DB_Data.xlsx" # Browser_Excel_StepDef.user_loads_the_data_from_located_at(String,String)
    Then user launches browser with url "#TestUrl"                                                    # Browser_Excel_StepDef.user_launches_browser_with_url(String)
    And user enters the Promo code "#Promo Code" in Search box named " Promo / PST / TA Code "        # UserStory_US859342.user_enters_the_Promo_code_in_Search_box_named(String,String)
    And user clicks on the search button                                                              # UserStory_US859342.user_clicks_on_the_search_button()

  @TestId_APS_17 @UserStory_US859342
  Scenario: Enter  a invalid TA code.                                                                 # UserStory_US859342.feature:123
    Given user loads the data from "excel" located at "src\test\resources\Fixture\Promo_DB_Data.xlsx" # Browser_Excel_StepDef.user_loads_the_data_from_located_at(String,String)
    Then user launches browser with url "#TestUrl"                                                    # Browser_Excel_StepDef.user_launches_browser_with_url(String)
    And user enters the Promo code "#Promo Code" in Search box named " Promo / PST / TA Code "        # UserStory_US859342.user_enters_the_Promo_code_in_Search_box_named(String,String)
    And user clicks on the search button                                                              # UserStory_US859342.user_clicks_on_the_search_button()

  @TestId_APS_18 @UserStory_US859342
  Scenario: Select checkbox Current promos only after entering Promo/PT/TA code.                      # UserStory_US859342.feature:130
    Given user loads the data from "excel" located at "src\test\resources\Fixture\Promo_DB_Data.xlsx" # Browser_Excel_StepDef.user_loads_the_data_from_located_at(String,String)
    Then user launches browser with url "#TestUrl"                                                    # Browser_Excel_StepDef.user_launches_browser_with_url(String)
    And user enters the Promo code "#Promo Code" in Search box named " Promo / PST / TA Code "        # UserStory_US859342.user_enters_the_Promo_code_in_Search_box_named(String,String)
    And user select the checkbox named " Current promos only "                                        # UserStory_US859342.user_select_the_checkbox_named(String)
    And user clicks on the search button                                                              # UserStory_US859342.user_clicks_on_the_search_button()
